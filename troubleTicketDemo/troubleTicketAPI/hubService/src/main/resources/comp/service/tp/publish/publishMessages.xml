<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<service xmlns="http://www.simplity.org/schema" name="publishMessages"
	moduleName="publish">
	<actions>
		<setValue fieldName="url" expression="concat(callback,'?correlation_Id=',correlation_Id)"
			executeOnCondition="action=='update'"></setValue>	
		<httpClient httpMethod="POST" urlString="$callback"
			contentType="application/json" executeOnCondition="action=='add'">
			<requestData>
				<outputRecords>
					<outputRecord recordName="TroubleTicket"/>
					<outputRecord recordName="RelatedObject" sheetName="relatedObjects"/>
					<outputRecord recordName="RelatedParty" sheetName="relatedParties"/>
					<outputRecord recordName="Note" sheetName="notes"/>
				</outputRecords>
			</requestData>
		</httpClient>
		<setValue fieldName="url" expression="concat(callback,'/',id,'?correlation_Id=',correlation_Id)"
			executeOnCondition="action=='update'"></setValue>
		<httpClient httpMethod="PUT" urlString="$url" contentType="application/json"
			executeOnCondition="action=='update'">			
			<requestData fieldNames="source">
				<outputRecords>
					<outputRecord recordName="TroubleTicket" />
					<outputRecord recordName="RelatedObject" sheetName="relatedObjects"/>
					<outputRecord recordName="RelatedParty" sheetName="relatedParties"/>
					<outputRecord recordName="Note" sheetName="notes"/>
				</outputRecords>
			</requestData>
		</httpClient>
	</actions>
</service>